{"ast":null,"code":"var _jsxFileName = \"/var/www/html/React-JS-REST-API-using-nodejs-and-mysql-master/client/src/components/all_pages.js\";\nimport React, { Component } from 'react';\nimport DataTable from 'react-data-table-component';\nimport axios from 'axios';\nclass PagesTable extends Component {\n  constructor() {\n    super();\n    this.state = {\n      pages: [],\n      filteredPages: [],\n      loading: true,\n      searchQuery: ''\n    };\n    this.handleSearch = this.handleSearch.bind(this);\n    this.handleEdit = this.handleEdit.bind(this);\n    this.handleDelete = this.handleDelete.bind(this);\n  }\n  componentDidMount() {\n    axios.get('http://localhost:5000/users/all-pages').then(res => {\n      this.setState({\n        pages: res.data,\n        filteredPages: res.data,\n        loading: false\n      });\n    }).catch(err => {\n      console.error(err);\n      this.setState({\n        loading: false\n      });\n    });\n  }\n  handleSearch(event) {\n    const query = event.target.value.toLowerCase();\n    this.setState({\n      searchQuery: query\n    });\n    const filteredPages = this.state.pages.filter(page => {\n      return page.title.toLowerCase().includes(query) || page.content.toLowerCase().includes(query) || page.img.toLowerCase().includes(query);\n    });\n    this.setState({\n      filteredPages\n    });\n  }\n  handleEdit(id) {\n    console.log(`Edit page with ID: ${id}`);\n    // Here you can add the logic to navigate to an edit page or open an edit modal\n  }\n\n  handleDelete(id) {\n    if (window.confirm(\"Are you sure you want to delete this page?\")) {\n      axios.delete(`http://localhost:5000/users/delete-page/${id}`).then(res => {\n        this.setState({\n          pages: this.state.pages.filter(page => page.id !== id),\n          filteredPages: this.state.filteredPages.filter(page => page.id !== id)\n        });\n      }).catch(err => {\n        console.error(err);\n      });\n    }\n  }\n  render() {\n    const columns = [{\n      name: 'ID',\n      selector: row => row.id,\n      sortable: true\n    }, {\n      name: 'Title',\n      selector: row => row.title,\n      sortable: true\n    }, {\n      name: 'Content',\n      selector: row => row.content,\n      sortable: true\n    }, {\n      name: 'Image',\n      selector: row => row.img,\n      cell: row => /*#__PURE__*/React.createElement(\"img\", {\n        src: `http://localhost:5000/uploads/${row.img}`,\n        alt: row.title,\n        width: \"50\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 22\n        }\n      })\n    }, {\n      name: 'Actions',\n      cell: row => /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-warning btn-sm mr-2\",\n        onClick: () => this.handleEdit(row.id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }\n      }, \"Edit\"), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-danger btn-sm\",\n        onClick: () => this.handleDelete(row.id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }\n      }, \"Delete\")),\n      ignoreRowClick: true,\n      allowOverflow: true,\n      button: true\n    }];\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"text-center mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }\n    }, \"Pages Data Table\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"Search...\",\n      value: this.state.searchQuery,\n      onChange: this.handleSearch,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(DataTable, {\n      columns: columns,\n      data: this.state.filteredPages,\n      progressPending: this.state.loading,\n      pagination: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }\n    }));\n  }\n}\nexport default PagesTable;","map":{"version":3,"names":["React","Component","DataTable","axios","PagesTable","constructor","state","pages","filteredPages","loading","searchQuery","handleSearch","bind","handleEdit","handleDelete","componentDidMount","get","then","res","setState","data","catch","err","console","error","event","query","target","value","toLowerCase","filter","page","title","includes","content","img","id","log","window","confirm","delete","render","columns","name","selector","row","sortable","cell","ignoreRowClick","allowOverflow","button"],"sources":["/var/www/html/React-JS-REST-API-using-nodejs-and-mysql-master/client/src/components/all_pages.js"],"sourcesContent":["import React, { Component } from 'react';\nimport DataTable from 'react-data-table-component';\nimport axios from 'axios';\n\nclass PagesTable extends Component {\n  constructor() {\n    super();\n    this.state = {\n      pages: [],\n      filteredPages: [],\n      loading: true,\n      searchQuery: ''\n    };\n\n    this.handleSearch = this.handleSearch.bind(this);\n    this.handleEdit = this.handleEdit.bind(this);\n    this.handleDelete = this.handleDelete.bind(this);\n  }\n\n  componentDidMount() {\n    axios.get('http://localhost:5000/users/all-pages')\n      .then(res => {\n        this.setState({\n          pages: res.data,\n          filteredPages: res.data,\n          loading: false\n        });\n      })\n      .catch(err => {\n        console.error(err);\n        this.setState({ loading: false });\n      });\n  }\n\n  handleSearch(event) {\n    const query = event.target.value.toLowerCase();\n    this.setState({ searchQuery: query });\n\n    const filteredPages = this.state.pages.filter(page => {\n      return (\n        page.title.toLowerCase().includes(query) ||\n        page.content.toLowerCase().includes(query) ||\n        page.img.toLowerCase().includes(query)\n      );\n    });\n\n    this.setState({ filteredPages });\n  }\n\n  handleEdit(id) {\n    console.log(`Edit page with ID: ${id}`);\n    // Here you can add the logic to navigate to an edit page or open an edit modal\n  }\n\n  handleDelete(id) {\n    if (window.confirm(\"Are you sure you want to delete this page?\")) {\n      axios.delete(`http://localhost:5000/users/delete-page/${id}`)\n        .then(res => {\n          this.setState({\n            pages: this.state.pages.filter(page => page.id !== id),\n            filteredPages: this.state.filteredPages.filter(page => page.id !== id)\n          });\n        })\n        .catch(err => {\n          console.error(err);\n        });\n    }\n  }\n\n  render() {\n    const columns = [\n      {\n        name: 'ID',\n        selector: row => row.id,\n        sortable: true,\n      },\n      {\n        name: 'Title',\n        selector: row => row.title,\n        sortable: true,\n      },\n      {\n        name: 'Content',\n        selector: row => row.content,\n        sortable: true,\n      },\n      {\n        name: 'Image',\n        selector: row => row.img,\n        cell: row => <img src={`http://localhost:5000/uploads/${row.img}`} alt={row.title} width=\"50\" />,\n      },\n      {\n        name: 'Actions',\n        cell: row => (\n          <div>\n            <button\n              className=\"btn btn-warning btn-sm mr-2\"\n              onClick={() => this.handleEdit(row.id)}\n            >\n              Edit\n            </button>\n            <button\n              className=\"btn btn-danger btn-sm\"\n              onClick={() => this.handleDelete(row.id)}\n            >\n              Delete\n            </button>\n          </div>\n        ),\n        ignoreRowClick: true,\n        allowOverflow: true,\n        button: true,\n      }\n    ];\n\n    return (\n      <div className=\"container mt-5\">\n        <h1 className=\"text-center mb-4\">Pages Data Table</h1>\n        <div className=\"form-group mb-4\">\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            placeholder=\"Search...\"\n            value={this.state.searchQuery}\n            onChange={this.handleSearch}\n          />\n        </div>\n        <DataTable\n          columns={columns}\n          data={this.state.filteredPages}\n          progressPending={this.state.loading}\n          pagination\n        />\n      </div>\n    );\n  }\n}\n\nexport default PagesTable;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}