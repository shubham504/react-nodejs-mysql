{"ast":null,"code":"var _jsxFileName = \"/var/www/html/React-JS-REST-API-using-nodejs-and-mysql-master/client/src/components/all_pages.js\";\nimport React, { Component } from 'react';\nimport { add_new_page } from './UserFunctions';\nimport jwt_decode from 'jwt-decode';\nclass add_pages extends Component {\n  constructor() {\n    super();\n    this.state = {\n      title: '',\n      content: '',\n      img: null,\n      // changed to null to handle file uploads\n      errors: {}\n    };\n    this.onChange = this.onChange.bind(this);\n    this.onFileChange = this.onFileChange.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n  componentDidMount() {\n    if (localStorage.getItem('usertoken') !== null) {\n      const token = localStorage.getItem('usertoken');\n      const decoded = jwt_decode(token);\n      this.setState({\n        publisher_id: decoded.id\n      });\n    }\n  }\n  onChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  }\n  onFileChange(e) {\n    this.setState({\n      img: e.target.files[0]\n    });\n  }\n  onSubmit(e) {\n    e.preventDefault();\n    const formData = new FormData();\n    formData.append('title', this.state.title);\n    formData.append('content', this.state.content);\n    formData.append('img', this.state.img);\n    add_new_page(formData).then(res => {\n      // this.props.history.push(`/login`);\n    });\n  }\n  render() {\n    if (localStorage.getItem('usertoken') !== null) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-6 mt-5 mx-auto\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        noValidate: true,\n        onSubmit: this.onSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        className: \"h3 mb-3 font-weight-normal\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 17\n        }\n      }, \"Add Pages\"), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-lg btn-primary btn-block\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 17\n        }\n      }, \"Add Page\")))));\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        className: \" font-style-bold text-center pt-5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }\n      }, \"Please Login\"));\n    }\n  }\n}\nexport default add_pages;","map":{"version":3,"names":["React","Component","add_new_page","jwt_decode","add_pages","constructor","state","title","content","img","errors","onChange","bind","onFileChange","onSubmit","componentDidMount","localStorage","getItem","token","decoded","setState","publisher_id","id","e","target","name","value","files","preventDefault","formData","FormData","append","then","res","render"],"sources":["/var/www/html/React-JS-REST-API-using-nodejs-and-mysql-master/client/src/components/all_pages.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { add_new_page } from './UserFunctions';\nimport jwt_decode from 'jwt-decode';\n\nclass add_pages extends Component {\n  constructor() {\n    super();\n    this.state = {\n      title: '',\n      content: '',\n      img: null, // changed to null to handle file uploads\n      errors: {}\n    };\n\n    this.onChange = this.onChange.bind(this);\n    this.onFileChange = this.onFileChange.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    if (localStorage.getItem('usertoken') !== null) {\n      const token = localStorage.getItem('usertoken');\n      const decoded = jwt_decode(token);\n      this.setState({\n        publisher_id: decoded.id\n      });\n    }\n  }\n\n  onChange(e) {\n    this.setState({ [e.target.name]: e.target.value });\n  }\n\n  onFileChange(e) {\n    this.setState({ img: e.target.files[0] });\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n    const formData = new FormData();\n    formData.append('title', this.state.title);\n    formData.append('content', this.state.content);\n    formData.append('img', this.state.img);\n\n    add_new_page(formData).then(res => {\n      // this.props.history.push(`/login`);\n    });\n  }\n\n  render() {\n    if (localStorage.getItem('usertoken') !== null) {\n      return (\n        <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col-md-6 mt-5 mx-auto\">\n              <form noValidate onSubmit={this.onSubmit}>\n                <h1 className=\"h3 mb-3 font-weight-normal\">Add Pages</h1>\n                \n                <button\n                  type=\"submit\"\n                  className=\"btn btn-lg btn-primary btn-block\"\n                >\n                  Add Page\n                </button>\n              </form>\n            </div>\n          </div>\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          <h3 className=\" font-style-bold text-center pt-5\">Please Login</h3>\n        </div>\n      );\n    }\n  }\n}\n\nexport default add_pages;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}